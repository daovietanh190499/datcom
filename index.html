<meta content="width=device-width, initial-scale=1" name="viewport" />
<style>
    @font-face {
        font-family: BirdyGame;
        src: url(Birdy_Game.ttf);
    }

    .shadowfilter {
        height: 7rem;
        -webkit-filter: drop-shadow(5px 5px 5px rgba(255, 255, 255, 0.5));
        filter: drop-shadow(5px 5px 5px rgba(255, 255, 255, 0.5));
        /* -webkit-filter: drop-shadow(0px 0px 12px 12px rgba(0, 0, 0, 0.5));
        filter: drop-shadow(0px 0px 12px 12px rgba(0, 0, 0, 0.5)); */
    }

    .arrow {
        color: azure;
        height: 5rem;
        cursor: pointer;
        -webkit-filter: drop-shadow(5px 5px 5px rgba(255, 255, 255, 0.5));
        filter: drop-shadow(5px 5px 5px rgba(255, 255, 255, 0.5));
    }

    .menu {
        width: 30%;
        color: azure;
        height: 3rem;
        cursor: pointer;
        -webkit-filter: drop-shadow(5px 5px 5px rgba(255, 255, 255, 0.5));
        filter: drop-shadow(5px 5px 5px rgba(255, 255, 255, 0.5));
    }

    .background {
        width: 100%;
        height: 100%;
        /* background-color: rgb(0, 3, 13); */
        margin: 0;
        padding: 0;
        background-image: url(seamless.png);
        background-repeat: repeat
    }

    .quantity {
        font-size: 7rem;
        font-family: BirdyGame;
        color: azure;
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
        justify-items: center;
        padding-top: 1rem;
        text-shadow: 7px 7px 10px rgba(255, 255, 255, 0.5);
    }

    .container {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
        justify-items: center;
        background-color: rgba(0, 3, 13, .5);
    }

    .container1 {
        width: 100%;
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
        justify-items: center;
        flex-direction: row;
        margin: 1.5rem;
    }

    .container2 {
        width: calc(100% - 3rem);
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
        justify-items: center;
        flex-direction: row;
        margin: 1.5rem;
        font-family: BirdyGame;
        text-shadow: 7px 7px 10px rgba(255, 255, 255, 0.5);
        color: azure;
        font-size: 3rem;
    }

    .absolute_container {
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        z-index:100;
    }

    .qrcode_wrapper {
        width: 30%;
        padding: 1rem;
        background-color: azure;
        border-radius: 1rem;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #qrcode {
        width: calc(100% - 1rem);
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #qrcode img, #qrcode canvas {
        margin: 0;
    }

    body {
        margin: 0;
        padding: 0;
    }

    .adding {
        animation:popup .5s;
    }

    .subtracting {
        animation:popdown .5s;
    }

    @keyframes popup  {
        0%, 100% {
            transform: scale(1);
        }
        
        50% {
            transform: scale(1.2);
        }
    }

    @keyframes popdown  {
        0%, 100% {
            transform: scale(1);
        }
        
        50% {
            transform: scale(0.8);
        }
    }

    @media only screen and (min-width: 900px) {
        .qrcode_wrapper {
            width: 300px;
        }
    }

    @media only screen and (max-width: 800px) {
        .container {
            flex-direction: column;
        }
        .arrow {
            height: 3rem;
        }
        .shadowfilter {
            height: 5rem;
        }
        .menu {
            height: 3rem;
        }
        .quantity {
            font-size: 5rem;
        }
        .container2 {
            font-size: 2rem;
        }
        .container1 {
            margin: 1rem;
        }
        .qrcode_wrapper {
            width: 70%;
        }
    }

</style>
<script src="qrcode.js"></script>
<div class="background">
    <div class="container">
        <div class="absolute_container">
            <div class="container2">
                <img src="checkmark.svg" class="menu" onclick="changeMenu('quantity')">
                <img src="list.svg" class="menu" onclick="changeMenu('list')">
                <img src="qrcode.svg" class="menu" onclick="changeMenu('qrcode')">
            </div>
            <div class="container2" style="margin-top: 2rem" id="name">
                Đào Việt Anh - IT
            </div>
        </div>
        <div class="container" style="background-color:transparent" id="content">
        </div>
    </div>
</div>

<script>
    // This function keeps the casing unchanged for str, then perform the conversion
    function toNonAccentVietnamese(str) {
        str = str.replace(/A|Á|À|Ã|Ạ|Â|Ấ|Ầ|Ẫ|Ậ|Ă|Ắ|Ằ|Ẵ|Ặ/g, "A");
        str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, "a");
        str = str.replace(/E|É|È|Ẽ|Ẹ|Ê|Ế|Ề|Ễ|Ệ/, "E");
        str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, "e");
        str = str.replace(/I|Í|Ì|Ĩ|Ị/g, "I");
        str = str.replace(/ì|í|ị|ỉ|ĩ/g, "i");
        str = str.replace(/O|Ó|Ò|Õ|Ọ|Ô|Ố|Ồ|Ỗ|Ộ|Ơ|Ớ|Ờ|Ỡ|Ợ/g, "O");
        str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, "o");
        str = str.replace(/U|Ú|Ù|Ũ|Ụ|Ư|Ứ|Ừ|Ữ|Ự/g, "U");
        str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, "u");
        str = str.replace(/Y|Ý|Ỳ|Ỹ|Ỵ/g, "Y");
        str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, "y");
        str = str.replace(/Đ/g, "D");
        str = str.replace(/đ/g, "d");
        // Some system encode vietnamese combining accent as individual utf-8 characters
        str = str.replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g, ""); // Huyền sắc hỏi ngã nặng 
        str = str.replace(/\u02C6|\u0306|\u031B/g, ""); // Â, Ê, Ă, Ơ, Ư
        return str;
    }
    document.getElementById("name").innerText = toNonAccentVietnamese(document.getElementById("name").innerText)

    var currentQuantity = 0
    document.getElementById("content").innerHTML = ` 
            <div class="container1">
                <img src="up-arrow.svg" class="arrow" onclick="adding()">
            </div>
            <div class="container1 adding" id="display_quantity">
                <div class="quantity" id="quantity"> ${currentQuantity} X </div>
                <img src="suatan.png" class="shadowfilter" id="meal"/>
            </div>
            <div class="container1">
                <img src="down-arrow.svg" class="arrow" onclick="subtracting()">
            </div>
            `

    function changeMenu(type) {
        if(type == "quantity") {
            document.getElementById("content").innerHTML = ` 
            <div class="container1">
                <img src="up-arrow.svg" class="arrow" onclick="adding()">
            </div>
            <div class="container1 adding" id="display_quantity">
                <div class="quantity" id="quantity"> ${currentQuantity} X </div>
                <img src="suatan.png" class="shadowfilter" id="meal"/>
            </div>
            <div class="container1">
                <img src="down-arrow.svg" class="arrow" onclick="subtracting()">
            </div>
            `

        } else if (type == "qrcode") {
            document.getElementById("content").innerHTML = ` 
            <div class="container1">
                <div class="qrcode_wrapper adding">
                    <div id="qrcode"></div>
                </div>
            </div>
            `
            var qrcode = new QRCode("qrcode", {
                text: "http://jindo.dev.naver.com/collie",
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
        }
    }

    function adding() {
        currentQuantity += 1
        document.getElementById("quantity").innerText = currentQuantity + " X"
        if (document.getElementById("display_quantity").classList.contains("adding"))
            document.getElementById("display_quantity").classList.remove("adding")
        void document.getElementById("display_quantity").offsetWidth
        document.getElementById("display_quantity").className = "container1 adding"
    }

    function subtracting() {
        currentQuantity -= 1
        currentQuantity = currentQuantity < 0 ? 0 : currentQuantity
        document.getElementById("quantity").innerText = currentQuantity + " X"
        if (document.getElementById("display_quantity").classList.contains("subtracting"))
            document.getElementById("display_quantity").classList.remove("subtracting")
        void document.getElementById("display_quantity").offsetHeight
        document.getElementById("display_quantity").className = "container1 subtracting"
    }

</script>